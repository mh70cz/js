<!DOCTYPE html>
<html>
    <head>
        <script src="./validate_rc.js" ></script>
        <script>
            function call_validator(){
                //console.log("validator called");
                document.getElementById("is_valid").innerHTML = '';
                document.getElementById("validation_results").innerHTML = '';

                let rc_raw;
                rc_raw = document.getElementById("in_rc").value;
                
                //console.log(rc_raw);

                rc_obj = validate_rc(rc_raw);

                console.log(rc_obj);

                let valid = rc_obj.valid;
                let dob = rc_obj.dob;
                let sex = rc_obj.sex;
                let note = rc_obj.note;



                if (valid){
                    document.getElementById("is_valid").innerHTML = 'Validní';
                    document.getElementById("is_valid").style.color = "green";
                } else {
                    document.getElementById("is_valid").innerHTML= 'Nevalidní';
                    document.getElementById("is_valid").style.color = "red";
                }
                
                if (dob){

                    let year = dob.slice(0,4);
                    let month = parseInt(dob.slice(5,7));
                    let day = parseInt(dob.slice(8,10));
                    let dob2 = day + "." + month + "." + year ; // alternativni format data narozeni

                    let para = document.createElement("P");
                    para.innerHTML = "Datum narození: " + dob + "&nbsp; &nbsp; &nbsp; " + dob2;
                    document.getElementById("validation_results").appendChild(para);
                }

                if(sex){
                    let para2 = document.createElement("P");
                    para2.innerHTML = "Pohlaví: " + sex;
                    document.getElementById("validation_results").appendChild(para2);
                }

                if(note){
                    let para3 = document.createElement("P");
                    para3.innerHTML = "Poznámka:  " + note;
                    document.getElementById("validation_results").appendChild(para3);
                }
            }

        </script>

    </head>
    <body>
        <h2>Validace RČ</h2>

        <form>
            <label for="in_rc">RČ k validaci</label>
            <input type="text" id="in_rc">            
            <button type="button" onclick="call_validator()">Validuj</button> <span id="is_valid"></span>
        </form>
        <div id="validation_results"/>
        <br>
        <hr>

        <h2>Generování RČ</h2>

        <form>
            <label for="in_dob">Datum narození</label>
            <input type="text" id="in_dob"> 
            <span>&nbsp;&nbsp;</span>
            <label for="in_ord">Pořadí</label>
            <input type="text" id="in_ord">
            <br> <br> 
            <input type="radio" id="in_sex_M" name="sex" value="M">
            <label for="in_sex_M">Muž</label><span>&nbsp;&nbsp;</span>
            <input type="radio" id="in_sex_M" name="sex" value="F">
            <label for="in_sex_M">Žena</label>       
            <span>&nbsp;&nbsp;</span> 
            <input type="checkbox" id="add20">
            <label for="add20">  Přidej 20 k datu narození</label>
            <br> <br>
            <button type="button" onclick="">Generuj</button>
        </form>


    </body>
</html>